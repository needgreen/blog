# Git 브랜치 전략

협업 개발을 위한 필수 개념인 Git 브랜치 전략에 대해 알아보자.

## 1. 브랜치(Branch)란?

브랜치는 버전 관리 시스템에서 하나의 저장소 안에 독립적인 개발 라인을 생성하는 기능이다. 원본 코드에 영향을 주지 않고 여러 사람이 동일한 소스 코드를 기반으로 서로 다른 작업을 할 수 있도록 한다.

### 브랜치의 특징

- 새로운 기능을 개발하거나 버그를 수정할 때 원본 코드와 분리된 공간에서 작업할 수 있다.
- 여러 개발자가 동시에 같은 저장소를 사용하더라도 각자의 브랜치에서 작업 후 병합하면 충돌을 최소화 할 수 있어 협업에 효율적이다.
- 배포 중인 서비스의 안정성을 유지하면서도 새로운 개발을 함께 진행 할 수 있다. 기능 개발 브랜치, 테스트용 브랜치 등 상황에 맞게 분리하여 진행할 수 있다.

## 2. 브랜치의 종류와 의미

### **Master(Main) 브랜치**

배포 가능한 안정적인 상태를 유지하는 브랜치로 언제든지 배포해도 문제가 없어야 한다. 최근에는 `master` 대신 `main`이라는 이름을 더 많이 사용한다.

### **Develop 브랜치**

다음 출시 버전 개발을 위한 브랜치로 개별 기능 브랜치들이 병합되는 공간이다. 개발이 완료되면 릴리즈(release) 브랜치로 분기된다.

### **Feature 브랜치**

새로운 기능을 개발하기 위해 사용되는 브랜치이다. 디벨롭(develop) 브랜치에서 생성하며 기능 개발이 완료되면 다시 디벨롭 브랜치에 병합한 후 삭제한다.

- 피쳐 브랜치 네이밍 규칙(feature/기능명)
  어떤 기능 개발인지 알기 쉽도록 구체적으로 작성한다.
  예) `feature/login`, `feature/payment`

### **Release 브랜치**

다음 버전 배포를 준비하는 브랜치이다. 디벨롭 브랜치에서 분기하여 버전 번호 부여, 버그 수정, QA 테스트를 진행한다. 작업이 완료되면 메인 브랜치와 디벨롭 브랜치에 병합된다.

- 릴리즈 브랜치 네이밍
  예) `release/버전번호` , `release/2.0.1`

### **Hotfix 브랜치**

배포된 메인 브랜치에 심각한 버그나 긴급한 수정 사항이 발생했을 때 사용된다. 메인 브랜치에 직접 생성하며 수정 완료 후 메인 브랜치와 디벨롭 브랜치에 병합된다.

## 3. 브랜치 관련 명령어

### **브랜치 생성 및 확인**

```bash
# 브랜치 목록 확인
git branch

# 새 브랜치 생성
git branch <브랜치명>

# 브랜치 생성과 동시에 이동
git checkout -b <브랜치명>
# 또는 (최신 방식)
git switch -c <브랜치명>

```

### **브랜치 이동**

```bash
# 브랜치 전환
git checkout <브랜치명>
# 또는 (최신 방식)
git switch <브랜치명>

```

### **브랜치 병합(Merge)**

```bash
# 현재 브랜치에 다른 브랜치를 병합
git merge <병합할브랜치명>

# 예: develop 브랜치를 master에 병합하려면
# 1. master로 이동
git checkout master
# 2. develop 병합
git merge develop

```

### **브랜치 삭제**

```bash
# 로컬 브랜치 삭제 (병합된 브랜치)
git branch -d <브랜치명>

# 강제 삭제 (병합되지 않은 브랜치)
git branch -D <브랜치명>

# 원격 브랜치 삭제
git push origin --delete <브랜치명>

```

### **원격 저장소 관련**

```bash
# 원격 저장소에 브랜치 푸시
git push origin <브랜치명>

# 원격 브랜치 내려받기
git pull origin <브랜치명>

# 원격 저장소 정보 가져오기 (병합은 안 함)
git fetch origin

```

## 4. PR(Pull Request)이란?

PR(Pull Request)은 GitHub와 같은 원격 저장소에서 자신이 수정하거나 추가한 코드를 다른 개발자와 공유하고 코드 리뷰를 거친 후 메인 브랜치에 병합(merge)해 달라고 요청하는 기능이다.

### PR이 필요한 이유

- **코드 공유** : 개인 브랜치에서 작업한 결과물을 다른 개발자들과 공유할 수 있다.
- **코드 리뷰** : 코드 품질, 버그나 오류 등을 발견하고 개선점을 논의할 수 있다.
- **안정성 및 협업** : 리뷰를 거친 뒤 병합되므로 메인 브랜치의 안정성을 유지할 수 있으며 협업 과정에서의 변경 이력과 토론 내역이 기록으로 남는다.

### PR 과정

1. **개발 및 브랜치 생성**

   작업 브랜치에서 코드를 작성하고 커밋(commit)한 후 원격 저장소에 푸시(push)한다.

2. **PR 생성**

   원격 저장소에서 메인 브랜치 또는 디벨롭 브랜치로 병합하고자 하는 브랜치를 선택하여 PR을 생성한다.

   - GitHub에서 'Compare & Pull Request' 버튼 클릭하여 진행한다.
   - 작업 내용, 변경 이유, 참고 사항을 작성해 협업자들이 이해하기 쉽도록 한다.

3. **코드 리뷰**

   협업자들이 PR을 확인하고 코드 품질, 버그 가능성, 유지보수성 등을 검토하며 코멘트로 피드백을 남긴다.

4. **수정 및 재검토**

   리뷰에서 받은 피드백을 반영해 코드를 수정 한 후 푸시한다. PR은 자동 갱신되며 협업자들이 수정 사항을 재검토한다.

5. **승인 및 병합(Merge)**

   리뷰어의 승인이 완료되면 대상 브랜치에 병합한다. 병합이 완료되면 해당 작업 브랜치는 삭제하여 저장소를 깔끔하게 유지한다.

### PR 작성 시 팁 📌

- **명확한 제목**
  - 어떤 작업인지 한눈에 알 수 있도록 구체적으로 작성한다.
    예)
    `Add: 회원가입 API 구현`
    `Fix: 결제 오류 수정 (#123)`
    `Refactor: 사용자 인증 로직 개선`
- **상세한 설명**
  - 작업 이유 및 배경
  - 주요 변경사항
  - 해결 방법
  - 관련 이슈 번호
  - 로컬 테스트 방법
- **작은 단위로 나누기** :
  - 변경 파일이 너무 많으면 리뷰가 어렵고 품질이 떨어질 수 있다. 기능 단위나 이슈 단위로 나누어 등록한다.
- **리뷰 효율성 향상**
  - @멘션으로 리뷰어를 지정한다.
  - UI 변경 시 스크린샷, gif를 첨부한다.
  - 복잡한 로직은 주석이나 설명을 추가한다.

## 5. 브랜치 전략

### Git Flow 전략

가장 널리 알려진 브랜치 전략으로 기능 개발, 테스트, 배포 과정을 명확히 분리하여 관리한다.

안정성과 체계적 관리에 강하지만 브랜치가 많아 관리가 복잡해질 수 있다.

- **브랜치 종류**
  - `main`: 배포용, 항상 안정적인 코드만 유지
  - `develop`: 다음 출시 버전 개발용
  - `feature/*`: 새로운 기능 개발용
  - `release/*`: 배포 준비 단계 (버그 수정, QA)
  - `hotfix/*`: 배포 후 긴급 수정

### GitHub Flow 전략

Git Flow에 비해 구조가 단순하고 빠른 배포와 피드백이 가능하다. 소규모 팀이나 빠른 개발 주기를 가진 프로젝트에 적합하다.

- 브랜치 구조
  - `main`: 언제든 배포 가능한 상태 유지
  - `feature/*`: 기능별 브랜치 생성 후 작업 → Pull Request → 코드 리뷰 → `main` 병합 → 배포

### GitLab Flow 전략

Git Flow와 GitHub Flow의 장점을 결합한 방식이다. **환경별 브랜치(프로덕션/스테이징)** 또는 **이슈 트래킹**과 연동하여 사용한다. CI/CD\* 파이프라인과 잘 통합되며 서비스 환경과 직접 연결된다.

- 브랜치 구조
  - `main` 또는 `master`: 개발 기준 브랜치
  - `production`, `staging`: 환경별 브랜치
  - 이슈(issue) 기반 브랜치 : `feature/123-login, bugfix/456-payment-error`

* CI/CD: Continuous Integration/Continuous Deployment (지속적 통합/지속적 배포)

### 브랜치 전략 비교

| 전략            | 주요 브랜치                                             | 특징                  | 장점                              | 단점                       | 적합한 경우                     |
| --------------- | ------------------------------------------------------- | --------------------- | --------------------------------- | -------------------------- | ------------------------------- |
| **Git Flow**    | `main`, `develop`, `feature/*`, `release/*`, `hotfix/*` | 체계적, 단계별 관리   | 안정성 확보, 역할 구분 명확       | 브랜치 많아 관리 복잡      | 중·대규모 프로젝트, 정기 릴리즈 |
| **GitHub Flow** | `main`, `feature/*`                                     | 단순한 구조, PR 중심  | 빠른 피드백, 단순한 협업          | 배포 관리가 까다로움       | 소규모 팀, 잦은 배포            |
| **GitLab Flow** | `main`, `production`, `staging`, 이슈 기반 브랜치       | 환경/이슈 트래킹 연동 | CI/CD와 잘 통합, 서비스 환경 직결 | 팀/인프라에 맞춘 설정 필요 | CI/CD 기반 개발, 환경별 운영    |

# 📝 마무리 정리

브랜치 전략은 **팀의 상황과 프로젝트의 특성에 맞는 적합한 방식을 선택**하고 필요에 따라 커스터마이징하는 것이 중요하다. 효율적인 협업과 안정적인 서비스 운영은 올바른 브랜치 전략에서부터 시작한다.
